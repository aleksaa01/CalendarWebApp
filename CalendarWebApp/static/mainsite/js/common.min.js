function e(){this.front_card=document.getElementById("front-card"),this.reg_card=document.getElementById("reg-card"),this.log_card=document.getElementById("log-card"),this.back_btn=document.getElementById("back-button"),this.showFrontCard=function(){this.back_btn.classList.add("hidden"),this.front_card.classList.remove("hidden"),this.reg_card.classList.add("hidden"),this.log_card.classList.add("hidden")},this.showRegisterCard=function(){this.back_btn.classList.remove("hidden"),this.front_card.classList.add("hidden"),this.reg_card.classList.remove("hidden"),this.log_card.classList.add("hidden")},this.showLoginCard=function(){this.back_btn.classList.remove("hidden"),this.front_card.classList.add("hidden"),this.reg_card.classList.add("hidden"),this.log_card.classList.remove("hidden")}}let t=new e;elem=document.getElementById("btn-register"),elem&&elem.addEventListener("click",function(){t.showRegisterCard()}),elem=document.getElementById("btn-login"),elem&&elem.addEventListener("click",function(){t.showLoginCard()}),elem=document.getElementById("back-button").addEventListener("click",function(){t.showFrontCard()}),elem=document.getElementById("register-submit"),elem&&elem.addEventListener("click",function(e){e.preventDefault();let s=document.forms["register-form"],n=s["reg-username"],i=s["reg-password"];url=s.action,data={username:n.value,password:i.value},xhr=new XMLHttpRequest,xhr.onreadystatechange=function(){if(xhr.readyState==xhr.DONE)if(200==xhr.status||201==xhr.status)console.log("Registered successfully"),n.value="",i.value="",t.showFrontCard();else{let e=JSON.parse(xhr.responseText);if(e.username)return n.setCustomValidity(e.username[0]),n.reportValidity(),void n.addEventListener("input",function e(){n.setCustomValidity(""),n.removeEventListener("input",e)});if(e.password)return i.setCustomValidity(e.password[0]),i.reportValidity(),void i.addEventListener("input",function e(){i.setCustomValidity(""),i.removeEventListener("input",e)});console.log("Failed to register")}},xhr.open("POST",url),xhr.setRequestHeader("Content-Type","application/json"),xhr.send(JSON.stringify(data))}),elem=document.getElementById("login-submit"),elem&&elem.addEventListener("click",function(e){e.preventDefault();let t=document.forms["login-form"],s=t.csrfmiddlewaretoken,n=t["log-username"],i=t["log-password"];n.reportValidity()&&i.reportValidity()&&(url=t.action,data={username:n.value,password:i.value},xhr=new XMLHttpRequest,xhr.onreadystatechange=function(){if(xhr.readyState==xhr.DONE)if(200==xhr.status||201==xhr.status)console.log("Logged in successfully"),document.write(xhr.responseText);else{let e=JSON.parse(xhr.responseText);if(e.username)return n.setCustomValidity(e.username[0]),n.reportValidity(),void n.addEventListener("input",function e(){n.setCustomValidity(""),n.removeEventListener("input",e)});if(e.password)return i.setCustomValidity(e.password[0]),i.reportValidity(),void i.addEventListener("input",function e(){i.setCustomValidity(""),i.removeEventListener("input",e)});if(e.detail)return i.setCustomValidity(e.detail),i.reportValidity(),void i.addEventListener("input",function e(){i.setCustomValidity(""),i.removeEventListener("input",e)});console.log("Failed to login")}},xhr.open("POST",url),xhr.setRequestHeader("Content-Type","application/json"),xhr.setRequestHeader("X-CSRFToken",s.value),xhr.send(JSON.stringify(data)))});